<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>FreeOrion: SectionedScopedTimer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FreeOrion
   &#160;<span id="projectnumber">0.4.8+</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classSectionedScopedTimer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SectionedScopedTimer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Logs period during which a this object or named sub sections existed.  
 <a href="classSectionedScopedTimer.html#details">More...</a></p>

<p><code>#include &lt;ScopedTimer.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer_1_1Impl.html">Impl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a72057de120ec4924101cb2c8b1d7e8f4"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer.html#a72057de120ec4924101cb2c8b1d7e8f4">SectionedScopedTimer</a> (const std::string &amp;timed_name, bool enable_output=false, std::chrono::microseconds threshold=std::chrono::milliseconds(1))</td></tr>
<tr class="separator:a72057de120ec4924101cb2c8b1d7e8f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac392362896acbf4686fcb5ec3d1d753"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer.html#aac392362896acbf4686fcb5ec3d1d753">SectionedScopedTimer</a> (const std::string &amp;timed_name, std::chrono::microseconds threshold)</td></tr>
<tr class="separator:aac392362896acbf4686fcb5ec3d1d753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63bad1a11fc01af8a76f8cdaeb0570b0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer.html#a63bad1a11fc01af8a76f8cdaeb0570b0">~SectionedScopedTimer</a> ()</td></tr>
<tr class="separator:a63bad1a11fc01af8a76f8cdaeb0570b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3eebdb3c4e3c9b3f1dbe3905a25ba3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer.html#aeb3eebdb3c4e3c9b3f1dbe3905a25ba3">EnterSection</a> (const std::string &amp;section_name)</td></tr>
<tr class="memdesc:aeb3eebdb3c4e3c9b3f1dbe3905a25ba3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start recording times for <code>section_name</code>.  <a href="#aeb3eebdb3c4e3c9b3f1dbe3905a25ba3">More...</a><br /></td></tr>
<tr class="separator:aeb3eebdb3c4e3c9b3f1dbe3905a25ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5330e058ed9987af018a2624bdc39ae8"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classSectionedScopedTimer_1_1Impl.html">Impl</a> &gt; const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSectionedScopedTimer.html#a5330e058ed9987af018a2624bdc39ae8">m_impl</a></td></tr>
<tr class="separator:a5330e058ed9987af018a2624bdc39ae8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Logs period during which a this object or named sub sections existed. </p>
<p>Similar to <a class="el" href="classScopedTimer.html" title="Logs period during which this object existed. ">ScopedTimer</a> <a class="el" href="classSectionedScopedTimer.html" title="Logs period during which a this object or named sub sections existed. ">SectionedScopedTimer</a> times the duration of its own existence. It also allows the creation of sub section timers. Timers are created by calling <a class="el" href="classSectionedScopedTimer.html#aeb3eebdb3c4e3c9b3f1dbe3905a25ba3" title="Start recording times for section_name. ">EnterSection()</a>.</p>
<p>Only one sub-section timer is active at any time.</p>
<p>Timers can be re-entered, which is effective to profile looping structures.</p>
<p>Any name is valid except an empty string. Calling EnterSection("") will stop the currently running sub section timer. The total time will still keep running.</p>
<p>When <a class="el" href="classSectionedScopedTimer.html" title="Logs period during which a this object or named sub sections existed. ">SectionedScopedTimer</a> goes out of scope it will print a table of its elapsed time and the sub sections.</p>
<p>It only prints times if the time is greater than the threshold. Each section is only printed if its time is greater than the threshold. The whole table is only printed if the total time is greater than the threshold.</p>
<p>The following is a usage example. It shows how to create timer with a section before a loop, two sections in a loop, a section after a loop and a section that will not be timed.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> function_to_profile () {</div><div class="line"></div><div class="line">    <a class="code" href="classSectionedScopedTimer.html">SectionedScopedTimer</a> timer(<span class="stringliteral">&quot;Title&quot;</span>, std::chrono::milliseconds(1));</div><div class="line">    timer.EnterSection(<span class="stringliteral">&quot;initial section&quot;</span>);</div><div class="line"></div><div class="line">    profiled_code();</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> () {</div><div class="line">        timer.EnterSection(<span class="stringliteral">&quot;for loop 1 section&quot;</span>);</div><div class="line"></div><div class="line">        more_code();</div><div class="line"></div><div class="line">        timer.EnterSection(<span class="stringliteral">&quot;for loop 2 section&quot;</span>);</div><div class="line"></div><div class="line">        even_more_code();</div><div class="line">    }</div><div class="line"></div><div class="line">    timer.EnterSection(<span class="stringliteral">&quot;&quot;</span>); <span class="comment">// don&#39;t time this section</span></div><div class="line"></div><div class="line">    untimed_code();</div><div class="line"></div><div class="line">    timer.EnterSection(<span class="stringliteral">&quot;final section&quot;</span>);</div><div class="line"></div><div class="line">    final_timed_code()</div><div class="line">}</div></div><!-- fragment --><p>The tables of times will look like the following:</p>
<div class="fragment"><div class="line">Title - initial section    time: xxxx ms</div><div class="line">Title - <span class="keywordflow">for</span> loop 1 section time: xxxx ms</div><div class="line">Title - <span class="keywordflow">for</span> loop 2 section time: xxxx ms</div><div class="line">Title - <span class="keyword">final</span> section      time: xxxx ms</div><div class="line">Title                      time: xxxx ms</div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a72057de120ec4924101cb2c8b1d7e8f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SectionedScopedTimer::SectionedScopedTimer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>timed_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable_output</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::microseconds&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>std::chrono::milliseconds(1)</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aac392362896acbf4686fcb5ec3d1d753"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SectionedScopedTimer::SectionedScopedTimer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>timed_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::chrono::microseconds&#160;</td>
          <td class="paramname"><em>threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a63bad1a11fc01af8a76f8cdaeb0570b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SectionedScopedTimer::~SectionedScopedTimer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aeb3eebdb3c4e3c9b3f1dbe3905a25ba3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SectionedScopedTimer::EnterSection </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>section_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start recording times for <code>section_name</code>. </p>
<p>This can be called multiple times to add more time to a previously created section. Use this feature to profile separate parts of loop strucures. </p>

<p>References <a class="el" href="classSectionedScopedTimer.html#a5330e058ed9987af018a2624bdc39ae8">m_impl</a>.</p>

<p>Referenced by <a class="el" href="classMapWnd.html#ace97150b42c6e9193013d9f06339bac0">MapWnd::DispatchFleetsExploring()</a>, <a class="el" href="classEncyclopediaDetailPanel.html#a04f5abe0cca5435d5aafed1d9c8c34b7">EncyclopediaDetailPanel::DoLayout()</a>, and <a class="el" href="classMapWnd.html#ab94274c277727155c865f82e35c7a7df">MapWnd::InitTurn()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a5330e058ed9987af018a2624bdc39ae8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classSectionedScopedTimer_1_1Impl.html">Impl</a>&gt; const SectionedScopedTimer::m_impl</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="classSectionedScopedTimer.html#aeb3eebdb3c4e3c9b3f1dbe3905a25ba3">EnterSection()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ScopedTimer_8h.html">ScopedTimer.h</a></li>
<li><a class="el" href="ScopedTimer_8cpp.html">ScopedTimer.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
