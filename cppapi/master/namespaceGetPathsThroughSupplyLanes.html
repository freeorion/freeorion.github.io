<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>FreeOrion: GetPathsThroughSupplyLanes Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">FreeOrion
   &#160;<span id="projectnumber">0.4.6+</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GetPathsThroughSupplyLanes Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGetPathsThroughSupplyLanes_1_1PathInfo.html">PathInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structGetPathsThroughSupplyLanes_1_1PrevCurrInfo.html">PrevCurrInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2480ddc06966cba3cc631a826fd2fd3e"><td class="memItemLeft" align="right" valign="top">typedef <br class="typebreak"/>
boost::unordered_multimap&lt; int, <br class="typebreak"/>
int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceGetPathsThroughSupplyLanes.html#a2480ddc06966cba3cc631a826fd2fd3e">SupplyLaneMMap</a></td></tr>
<tr class="separator:a2480ddc06966cba3cc631a826fd2fd3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a71c520893ee9b87b172fb0eddbcaea1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceGetPathsThroughSupplyLanes.html#a71c520893ee9b87b172fb0eddbcaea1d">GetPathsThroughSupplyLanes</a> (boost::unordered_set&lt; int &gt; &amp;good_path, const boost::unordered_set&lt; int &gt; &amp;terminal_points, const <a class="el" href="namespaceGetPathsThroughSupplyLanes.html#a2480ddc06966cba3cc631a826fd2fd3e">SupplyLaneMMap</a> &amp;supply_lanes)</td></tr>
<tr class="separator:a71c520893ee9b87b172fb0eddbcaea1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a2480ddc06966cba3cc631a826fd2fd3e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::unordered_multimap&lt;int,int&gt; <a class="el" href="namespaceGetPathsThroughSupplyLanes.html#a2480ddc06966cba3cc631a826fd2fd3e">GetPathsThroughSupplyLanes::SupplyLaneMMap</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a71c520893ee9b87b172fb0eddbcaea1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetPathsThroughSupplyLanes::GetPathsThroughSupplyLanes </td>
          <td>(</td>
          <td class="paramtype">boost::unordered_set&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>good_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const boost::unordered_set&lt; int &gt; &amp;&#160;</td>
          <td class="paramname"><em>terminal_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SupplyLaneMMap &amp;&#160;</td>
          <td class="paramname"><em>supply_lanes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p><a class="el" href="namespaceGetPathsThroughSupplyLanes.html">GetPathsThroughSupplyLanes</a> starts with:</p>
<p><code>terminal_points</code> are system ids of systems that contain either a resource source or a resource sink.</p>
<p><code>supply_lanes</code> are pairs of system ids at the end of supply lanes.</p>
<p><a class="el" href="namespaceGetPathsThroughSupplyLanes.html">GetPathsThroughSupplyLanes</a> returns a <code>good_path</code>.</p>
<p>The <code>good_path</code> is all system ids of systems connecting any <code>terminal_point</code> to any other reachable <code>terminal_point</code> along the <code>supply_lanes</code>. The <code>good_path</code> is all systems on a path that could transport a resource from a source to a sink along a starlane that is part of the starlanes through which supply can flow (See <a class="el" href="Supply_8h.html">Empire/Supply.h</a> for details.). The <code>good_path</code> includes the terminal point system ids that are part of the path. The <code>good_path</code> will exclude terminal_points not connected to a supply lane, islands of supply lane not connected to at least two terminal points, and dead-end lengths of supply lane that don't connect between two terminal points.</p>
<p>Algorithm Descrition:</p>
<p>The algorithm starts with terminal points and supply lanes. It finds all paths from any terminal point to any other terminal point connected only by supply lanes.</p>
<p>The algorithm finds and returns all system ids on the <code>good_path</code> in two steps: 1) find mid points on paths along supply lanes between terminal points, 2) return the system ids collected by tracing the paths from mid points to terminal points of the found paths.</p>
<p>In the first part, it starts a breadth first search from every terminal point at once. It tracks which terminal point each path started from.</p>
<p>When two paths from different terminal points meet it records both points that met as mid points on a good path between terminal points.</p>
<p>When two paths meet from the same terminal points it merges them into one path.</p>
<p>In the second part, it starts from the mid points and works its way back to the terminal points, recording every system along the path as part of the good path. It stops when it reaches a system already in the good path.</p>
<p>The algorithm is fast because neither the first nor the second part visits any system more than once.</p>
<p>The first part uses visited to track already visited systems.</p>
<p>The second part stops back tracking along paths when it reaches systems already on the good path. </p>

<p>References <a class="el" href="structGetPathsThroughSupplyLanes_1_1PrevCurrInfo.html#aecf1201d16ddb342f96317b8081f0d80">GetPathsThroughSupplyLanes::PrevCurrInfo::curr</a>, <a class="el" href="structGetPathsThroughSupplyLanes_1_1PrevCurrInfo.html#a4b3049694b077329100740c1cc55344d">GetPathsThroughSupplyLanes::PrevCurrInfo::origin</a>, and <a class="el" href="structGetPathsThroughSupplyLanes_1_1PrevCurrInfo.html#a700296c4f0a8911501274b796e736768">GetPathsThroughSupplyLanes::PrevCurrInfo::prev</a>.</p>

<p>Referenced by <a class="el" href="classMapWnd.html#a2b5e53f4f0a80c3cdde61922936ff856">MapWnd::InitStarlaneRenderingBuffers()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
